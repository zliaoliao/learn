## 流水线

常规前端项目自动化部署分为三个阶段：
1. 设置git源
2. 构建（比如前端项目执行npm run build）
3. 部署（将构建好的文件部署）


## 前端部署

一般是流水线拉取github仓库最新代码，执行构建：可以选择阿里云效或者jinkens


阿里云效： 
1.  在阿里云效工作台，新建项目（DevOps）,切换到流水线tab, 新建流水线， 选择空模版， 进入后选择 node.js技栈， 选择部署到oss(对象存储)【云效支持使用 AWS Elastic Beanstalk 或 AWS ECS（Elastic Container Service）等服务进行应用程序的自动化部署和扩展】
2.  建立流水线： 选择快速配置流水线模版， 测试阶段（不需要可以跳过）， 构建阶段（可以选择oss或者docker镜像），部署阶段（可以选择部署的主机，包括aws, 把云效提供的基本放到对应云服务器上执行一遍）， 完成后需要选择git源(支持bitbucket源)，还可以自定义部署命令，选择oss存储桶
3.  多环境： 创建两条流水线，一条测试环境用，一条正式环境用，然后创建两个对应的存储桶



## 接口服务

由于koa.js等接口服务不需要构建， 因此仅需要git pull最新代码， 然后运行pm2命令重启服务即可。